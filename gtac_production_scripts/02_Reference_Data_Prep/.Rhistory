if (!exists(dir)) {
dir.create(dir)
}
# set longer time to permit download - in seconds
options(timeout = 120)
# set longer time to permit download - in seconds
options(timeout = 7200)
# set file destination - will be created if it does not eists
# dir <- glue::glue("{home_dir}TreeMap/01_Data/04_FIA/05_FIA_DataMart/CSV/")
dir <- "C:/Users/abhinavshrestha/OneDrive - USDA/Documents/02_TreeMap/temp_dir/04_FIA/05_FIA_DataMart/CSV/"
seq_along(states)
j = 1
state_name <- states[j]
print(paste0("downloading ", state_name))
k = 1
tbl <- tables[k]
tbl
#create url
url <- glue::glue("{url_base}{state_name}_{tbl}.csv")
url
glue::glue('{dir}{strsplit(url, "/")[[1]][7]}')
print(paste0("downloading ", state_name))
print(paste0("downloading ", state_name, " ", tbl))
print(paste0("downloading ", state_name, "-", tbl))
# list states - lower 48 states by abbreviation
# states <- c("ID", "UT", "WY")
states <- c("NV", "CO", "MT")
# states <- c("AL", "AR", "AZ", "CA", "CO", "CT",
#             "DE", "FL", "GA", "ID", "IL", "IN",
#             "IA", "KS", "KY", "LA", "ME", "MD",
#             "MA", "MI", "MN", "MS", "MO", "MT",
#             "NE", "NV", "NH", "NJ", "NM", "NY",
#             "NC", "ND", "OH", "OK", "OR", "PA",
#             "RI", "SD", "SC", "TN", "TX", "UT",
#             "VA", "VT", "WV", "WI", "WY", 'WA')
# list tables to download
tables <- c("COND", "PLOT", "TREE")
# sample url https://apps.fs.usda.gov/fia/datamart/Databases/SQLite_FIADB_CA.zip
url_base <- "https://apps.fs.usda.gov/fia/datamart/CSV/"
# create export dir
if (!exists(dir)) {
dir.create(dir)
}
# set longer time to permit download - in seconds
options(timeout = 7200)
# Download FIA data by state
###########################################################
for (j in seq_along(states)){
#j = 1 # for testing
state_name <- states[j]
for(k in seq_along(tables)){
#k = 1 # for testing
tbl <- tables[k]
#create url
url <- glue::glue("{url_base}{state_name}_{tbl}.csv")
# create file name
filename <- glue::glue('{dir}{strsplit(url, "/")[[1]][7]}')
print(paste0("downloading ", state_name, "-", tbl))
#what url are you working on?
print(url)
print(filename)
#download files
# download.file(url, filename, mode = "wb")
}
}
# Download PLOT, COND, and TREE tables from FIA database, by State
# Save tables to specified drive as .csv
# Written by Lila Leatherman (lila.leatherman @usda.gov)
# Last updated: 05/08/24
##########################################################
ptm_Start <- Sys.time() # processing time (ptm) calc start point
# alternately, is there a remote sqlite instance I can connect to?
# set home dir
# home_dir <- "//166.2.126.25/TreeMap/"
# set file destination - will be created if it does not eists
# dir <- glue::glue("{home_dir}TreeMap/01_Data/04_FIA/05_FIA_DataMart/CSV/")
dir <- "C:/Users/abhinavshrestha/OneDrive - USDA/Documents/02_TreeMap/temp_dir/04_FIA/05_FIA_DataMart/CSV/"
# list states - lower 48 states by abbreviation
# states <- c("ID", "UT", "WY")
states <- c("NV", "CO", "MT")
# states <- c("AL", "AR", "AZ", "CA", "CO", "CT",
#             "DE", "FL", "GA", "ID", "IL", "IN",
#             "IA", "KS", "KY", "LA", "ME", "MD",
#             "MA", "MI", "MN", "MS", "MO", "MT",
#             "NE", "NV", "NH", "NJ", "NM", "NY",
#             "NC", "ND", "OH", "OK", "OR", "PA",
#             "RI", "SD", "SC", "TN", "TX", "UT",
#             "VA", "VT", "WV", "WI", "WY", 'WA')
# list tables to download
tables <- c("COND", "PLOT", "TREE")
# sample url https://apps.fs.usda.gov/fia/datamart/Databases/SQLite_FIADB_CA.zip
url_base <- "https://apps.fs.usda.gov/fia/datamart/CSV/"
# create export dir
if (!exists(dir)) {
dir.create(dir)
}
# set longer time to permit download - in seconds
options(timeout = 7200)
# Download FIA data by state
###########################################################
for (j in seq_along(states)){
#j = 1 # for testing
ptm_State <- Sys.time()
state_name <- states[j]
for(k in seq_along(tables)){
#k = 1 # for testing
tbl <- tables[k]
#create url
url <- glue::glue("{url_base}{state_name}_{tbl}.csv")
# create file name
filename <- glue::glue('{dir}{strsplit(url, "/")[[1]][7]}')
print(paste0("downloading ", state_name, "-", tbl))
#what url are you working on?
print(url)
print(filename)
#download files
# download.file(url, filename, mode = "wb")
}
print(paste0("Done with ", state_name, ". Moving to next..."))
print(Sys.time()-ptm_State)
}
print("Done with downloading all FIA data.")
print(Sys.time()-ptm_Start)
# Download PLOT, COND, and TREE tables from FIA database, by State
# Save tables to specified drive as .csv
# Written by Lila Leatherman (lila.leatherman @usda.gov)
# Last updated: 05/08/24
##########################################################
ptm_Start <- Sys.time() # processing time (ptm) calc start point
# alternately, is there a remote sqlite instance I can connect to?
# set home dir
# home_dir <- "//166.2.126.25/TreeMap/"
# set file destination - will be created if it does not eists
# dir <- glue::glue("{home_dir}TreeMap/01_Data/04_FIA/05_FIA_DataMart/CSV/")
dir <- "C:/Users/abhinavshrestha/OneDrive - USDA/Documents/02_TreeMap/temp_dir/04_FIA/05_FIA_DataMart/CSV/"
# list states - lower 48 states by abbreviation
# states <- c("ID", "UT", "WY")
states <- c("NV", "CO", "MT")
# states <- c("AL", "AR", "AZ", "CA", "CO", "CT",
#             "DE", "FL", "GA", "ID", "IL", "IN",
#             "IA", "KS", "KY", "LA", "ME", "MD",
#             "MA", "MI", "MN", "MS", "MO", "MT",
#             "NE", "NV", "NH", "NJ", "NM", "NY",
#             "NC", "ND", "OH", "OK", "OR", "PA",
#             "RI", "SD", "SC", "TN", "TX", "UT",
#             "VA", "VT", "WV", "WI", "WY", 'WA')
# list tables to download
tables <- c("COND", "PLOT", "TREE")
# sample url https://apps.fs.usda.gov/fia/datamart/Databases/SQLite_FIADB_CA.zip
url_base <- "https://apps.fs.usda.gov/fia/datamart/CSV/"
# create export dir
if (!exists(dir)) {
dir.create(dir)
}
# set longer time to permit download - in seconds
options(timeout = 7200)
# Download FIA data by state
###########################################################
for (j in seq_along(states)){
#j = 1 # for testing
ptm_State <- Sys.time()
state_name <- states[j]
for(k in seq_along(tables)){
#k = 1 # for testing
tbl <- tables[k]
#create url
url <- glue::glue("{url_base}{state_name}_{tbl}.csv")
# create file name
filename <- glue::glue('{dir}{strsplit(url, "/")[[1]][7]}')
print(paste0("downloading ", state_name, "-", tbl))
#what url are you working on?
print(url)
print(filename)
#download files
# download.file(url, filename, mode = "wb")
}
print(paste0("Done with ", state_name, ". Moving to next..."))
print(Sys.time()-ptm_State)
print("---------------------------------------------------------------------")
}
print("Done with downloading all FIA data.")
print(Sys.time()-ptm_Start)
# Download PLOT, COND, and TREE tables from FIA database, by State
# Save tables to specified drive as .csv
# Written by Lila Leatherman (lila.leatherman @usda.gov)
# Last updated: 05/08/24
##########################################################
ptm_Start <- Sys.time() # processing time (ptm) calc start point
# alternately, is there a remote sqlite instance I can connect to?
# set home dir
# home_dir <- "//166.2.126.25/TreeMap/"
# set file destination - will be created if it does not eists
# dir <- glue::glue("{home_dir}TreeMap/01_Data/04_FIA/05_FIA_DataMart/CSV/")
dir <- "C:/Users/abhinavshrestha/OneDrive - USDA/Documents/02_TreeMap/temp_dir/04_FIA/05_FIA_DataMart/CSV/"
# list states - lower 48 states by abbreviation
# states <- c("ID", "UT", "WY")
states <- c("NV", "CO", "MT")
# states <- c("AL", "AR", "AZ", "CA", "CO", "CT",
#             "DE", "FL", "GA", "ID", "IL", "IN",
#             "IA", "KS", "KY", "LA", "ME", "MD",
#             "MA", "MI", "MN", "MS", "MO", "MT",
#             "NE", "NV", "NH", "NJ", "NM", "NY",
#             "NC", "ND", "OH", "OK", "OR", "PA",
#             "RI", "SD", "SC", "TN", "TX", "UT",
#             "VA", "VT", "WV", "WI", "WY", 'WA')
# list tables to download
tables <- c("COND", "PLOT", "TREE")
# sample url https://apps.fs.usda.gov/fia/datamart/Databases/SQLite_FIADB_CA.zip
url_base <- "https://apps.fs.usda.gov/fia/datamart/CSV/"
# create export dir
if (!exists(dir)) {
dir.create(dir)
}
# set longer time to permit download - in seconds
options(timeout = 7200)
# Download FIA data by state
###########################################################
for (j in seq_along(states)){
#j = 1 # for testing
ptm_State <- Sys.time()
state_name <- states[j]
for(k in seq_along(tables)){
#k = 1 # for testing
tbl <- tables[k]
#create url
url <- glue::glue("{url_base}{state_name}_{tbl}.csv")
# create file name
filename <- glue::glue('{dir}{strsplit(url, "/")[[1]][7]}')
print("---------------------------------------------------------------------")
print(paste0("Downloading ", state_name, "-", tbl))
print("---------------------------------------------------------------------")
#what url are you working on?
print(url)
print(filename)
#download files
# download.file(url, filename, mode = "wb")
}
print(paste0("Done with ", state_name, ". Moving to next..."))
print(Sys.time()-ptm_State)
print("=====================================================================")
}
print("Done with downloading all FIA data.")
print(Sys.time()-ptm_Start)
# Download PLOT, COND, and TREE tables from FIA database, by State
# Save tables to specified drive as .csv
# Written by Lila Leatherman (lila.leatherman @usda.gov)
# Last updated: 05/08/24
##########################################################
ptm_Start <- Sys.time() # processing time (ptm) calc start point
# alternately, is there a remote sqlite instance I can connect to?
# set home dir
# home_dir <- "//166.2.126.25/TreeMap/"
# set file destination - will be created if it does not eists
# dir <- glue::glue("{home_dir}TreeMap/01_Data/04_FIA/05_FIA_DataMart/CSV/")
dir <- "C:/Users/abhinavshrestha/OneDrive - USDA/Documents/02_TreeMap/temp_dir/04_FIA/05_FIA_DataMart/CSV/"
# list states - lower 48 states by abbreviation
# states <- c("ID", "UT", "WY")
states <- c("NV", "CO", "MT")
# states <- c("AL", "AR", "AZ", "CA", "CO", "CT",
#             "DE", "FL", "GA", "ID", "IL", "IN",
#             "IA", "KS", "KY", "LA", "ME", "MD",
#             "MA", "MI", "MN", "MS", "MO", "MT",
#             "NE", "NV", "NH", "NJ", "NM", "NY",
#             "NC", "ND", "OH", "OK", "OR", "PA",
#             "RI", "SD", "SC", "TN", "TX", "UT",
#             "VA", "VT", "WV", "WI", "WY", 'WA')
# list tables to download
tables <- c("COND", "PLOT", "TREE")
# sample url https://apps.fs.usda.gov/fia/datamart/Databases/SQLite_FIADB_CA.zip
url_base <- "https://apps.fs.usda.gov/fia/datamart/CSV/"
# create export dir
if (!exists(dir)) {
dir.create(dir)
}
# set longer time to permit download - in seconds
options(timeout = 7200)
# Download FIA data by state
###########################################################
for (j in seq_along(states)){
#j = 1 # for testing
ptm_State <- Sys.time()
state_name <- states[j]
for(k in seq_along(tables)){
#k = 1 # for testing
tbl <- tables[k]
#create url
url <- glue::glue("{url_base}{state_name}_{tbl}.csv")
# create file name
filename <- glue::glue('{dir}{strsplit(url, "/")[[1]][7]}')
print("---------------------------------------------------------------------")
print(paste0("Downloading ", state_name, "-", tbl))
print("---------------------------------------------------------------------")
#what url are you working on?
print(url)
print(filename)
#download files
# download.file(url, filename, mode = "wb")
}
print(paste0("Done with ", state_name, ". Moving to next..."))
print(Sys.time()-ptm_State)
print(" ")
}
print("Done with downloading all FIA data.")
print(Sys.time()-ptm_Start)
# Download PLOT, COND, and TREE tables from FIA database, by State
# Save tables to specified drive as .csv
# Written by Lila Leatherman (lila.leatherman @usda.gov)
# Last updated: 05/08/24
##########################################################
ptm_Start <- Sys.time() # processing time (ptm) calc start point
# alternately, is there a remote sqlite instance I can connect to?
# set home dir
# home_dir <- "//166.2.126.25/TreeMap/"
# set file destination - will be created if it does not eists
# dir <- glue::glue("{home_dir}TreeMap/01_Data/04_FIA/05_FIA_DataMart/CSV/")
dir <- "C:/Users/abhinavshrestha/OneDrive - USDA/Documents/02_TreeMap/temp_dir/04_FIA/05_FIA_DataMart/CSV/"
# list states - lower 48 states by abbreviation
# states <- c("ID", "UT", "WY")
states <- c("NV", "CO", "MT")
# states <- c("AL", "AR", "AZ", "CA", "CO", "CT",
#             "DE", "FL", "GA", "ID", "IL", "IN",
#             "IA", "KS", "KY", "LA", "ME", "MD",
#             "MA", "MI", "MN", "MS", "MO", "MT",
#             "NE", "NV", "NH", "NJ", "NM", "NY",
#             "NC", "ND", "OH", "OK", "OR", "PA",
#             "RI", "SD", "SC", "TN", "TX", "UT",
#             "VA", "VT", "WV", "WI", "WY", 'WA')
# list tables to download
tables <- c("COND", "PLOT", "TREE")
# sample url https://apps.fs.usda.gov/fia/datamart/Databases/SQLite_FIADB_CA.zip
url_base <- "https://apps.fs.usda.gov/fia/datamart/CSV/"
# create export dir
if (!exists(dir)) {
dir.create(dir)
}
# set longer time to permit download - in seconds
options(timeout = 7200)
# Download FIA data by state
###########################################################
for (j in seq_along(states)){
#j = 1 # for testing
ptm_State <- Sys.time()
state_name <- states[j]
for(k in seq_along(tables)){
#k = 1 # for testing
tbl <- tables[k]
#create url
url <- glue::glue("{url_base}{state_name}_{tbl}.csv")
# create file name
filename <- glue::glue('{dir}{strsplit(url, "/")[[1]][7]}')
print("---------------------------------------------------------------------")
print(paste0("Downloading ", state_name, "-", tbl))
print("---------------------------------------------------------------------")
#what url are you working on?
print(url)
print(filename)
#download files
# download.file(url, filename, mode = "wb")
}
print(paste0("Done with ", state_name, ". Moving to next..."))
message(Sys.time()-ptm_State)
}
print("Done with downloading all FIA data.")
print(Sys.time()-ptm_Start)
# Download PLOT, COND, and TREE tables from FIA database, by State
# Save tables to specified drive as .csv
# Written by Lila Leatherman (lila.leatherman @usda.gov)
# Last updated: 05/08/24
##########################################################
ptm_Start <- Sys.time() # processing time (ptm) calc start point
# alternately, is there a remote sqlite instance I can connect to?
# set home dir
# home_dir <- "//166.2.126.25/TreeMap/"
# set file destination - will be created if it does not eists
# dir <- glue::glue("{home_dir}TreeMap/01_Data/04_FIA/05_FIA_DataMart/CSV/")
dir <- "C:/Users/abhinavshrestha/OneDrive - USDA/Documents/02_TreeMap/temp_dir/04_FIA/05_FIA_DataMart/CSV/"
# list states - lower 48 states by abbreviation
# states <- c("ID", "UT", "WY")
states <- c("NV", "CO", "MT")
# states <- c("AL", "AR", "AZ", "CA", "CO", "CT",
#             "DE", "FL", "GA", "ID", "IL", "IN",
#             "IA", "KS", "KY", "LA", "ME", "MD",
#             "MA", "MI", "MN", "MS", "MO", "MT",
#             "NE", "NV", "NH", "NJ", "NM", "NY",
#             "NC", "ND", "OH", "OK", "OR", "PA",
#             "RI", "SD", "SC", "TN", "TX", "UT",
#             "VA", "VT", "WV", "WI", "WY", 'WA')
# list tables to download
tables <- c("COND", "PLOT", "TREE")
# sample url https://apps.fs.usda.gov/fia/datamart/Databases/SQLite_FIADB_CA.zip
url_base <- "https://apps.fs.usda.gov/fia/datamart/CSV/"
# create export dir
if (!exists(dir)) {
dir.create(dir)
}
# set longer time to permit download - in seconds
options(timeout = 7200)
# Download FIA data by state
###########################################################
for (j in seq_along(states)){
#j = 1 # for testing
ptm_State <- Sys.time()
state_name <- states[j]
for(k in seq_along(tables)){
#k = 1 # for testing
tbl <- tables[k]
#create url
url <- glue::glue("{url_base}{state_name}_{tbl}.csv")
# create file name
filename <- glue::glue('{dir}{strsplit(url, "/")[[1]][7]}')
print("---------------------------------------------------------------------")
print(paste0("Downloading ", state_name, "-", tbl))
print("---------------------------------------------------------------------")
#what url are you working on?
print(url)
print(filename)
#download files
# download.file(url, filename, mode = "wb")
}
message(print(Sys.time()-ptm_State))
print(paste0("Done with ", state_name, ". Moving to next..."))
}
print("Done with downloading all FIA data.")
print(Sys.time()-ptm_Start)
# Download PLOT, COND, and TREE tables from FIA database, by State
# Save tables to specified drive as .csv
# Written by Lila Leatherman (lila.leatherman @usda.gov)
# Last updated: 05/08/24
##########################################################
ptm_Start <- Sys.time() # processing time (ptm) calc start point
# alternately, is there a remote sqlite instance I can connect to?
# set home dir
# home_dir <- "//166.2.126.25/TreeMap/"
# set file destination - will be created if it does not eists
# dir <- glue::glue("{home_dir}TreeMap/01_Data/04_FIA/05_FIA_DataMart/CSV/")
dir <- "C:/Users/abhinavshrestha/OneDrive - USDA/Documents/02_TreeMap/temp_dir/04_FIA/05_FIA_DataMart/CSV/"
# list states - lower 48 states by abbreviation
# states <- c("ID", "UT", "WY")
states <- c("NV", "CO", "MT")
# states <- c("AL", "AR", "AZ", "CA", "CO", "CT",
#             "DE", "FL", "GA", "ID", "IL", "IN",
#             "IA", "KS", "KY", "LA", "ME", "MD",
#             "MA", "MI", "MN", "MS", "MO", "MT",
#             "NE", "NV", "NH", "NJ", "NM", "NY",
#             "NC", "ND", "OH", "OK", "OR", "PA",
#             "RI", "SD", "SC", "TN", "TX", "UT",
#             "VA", "VT", "WV", "WI", "WY", 'WA')
# list tables to download
tables <- c("COND", "PLOT", "TREE")
# sample url https://apps.fs.usda.gov/fia/datamart/Databases/SQLite_FIADB_CA.zip
url_base <- "https://apps.fs.usda.gov/fia/datamart/CSV/"
# create export dir
if (!exists(dir)) {
dir.create(dir)
}
# set longer time to permit download - in seconds
options(timeout = 7200)
# Download FIA data by state
###########################################################
for (j in seq_along(states)){
#j = 1 # for testing
ptm_State <- Sys.time()
state_name <- states[j]
for(k in seq_along(tables)){
#k = 1 # for testing
tbl <- tables[k]
#create url
url <- glue::glue("{url_base}{state_name}_{tbl}.csv")
# create file name
filename <- glue::glue('{dir}{strsplit(url, "/")[[1]][7]}')
print("---------------------------------------------------------------------")
print(paste0("Downloading ", state_name, "-", tbl))
print("---------------------------------------------------------------------")
#what url are you working on?
print(url)
print(filename)
#download files
# download.file(url, filename, mode = "wb")
}
print(Sys.time()-ptm_State)
message(paste0("Done with ", state_name, ". Moving to next..."))
}
print("Done with downloading all FIA data.")
print(Sys.time()-ptm_Start)
source("~/GitHub/gtac-treemap/gtac_production_scripts/02_Reference_Data_Prep/01_download_fia_data.R")
# list states - lower 48 states by abbreviation
# states <- c("ID", "UT", "WY")
# states <- c("NV", "CO", "MT")
states <- c("AL", "AR", "AZ", "CA", "CO", "CT",
"DE", "FL", "GA", "ID", "IL", "IN",
"IA", "KS", "KY", "LA", "ME", "MD",
"MA", "MI", "MN", "MS", "MO", "MT",
"NE", "NV", "NH", "NJ", "NM", "NY",
"NC", "ND", "OH", "OK", "OR", "PA",
"RI", "SD", "SC", "TN", "TX", "UT",
"VA", "VT", "WV", "WI", "WY", 'WA')
length(states)
# create export dir
if (!exists(dir)) {
dir.create(dir)
}
exists(dir)
# set file destination - will be created if it does not eists
# dir <- glue::glue("{home_dir}TreeMap/01_Data/04_FIA/05_FIA_DataMart/CSV/")
dir <- "C:/Users/abhinavshrestha/OneDrive - USDA/Documents/02_TreeMap/temp_dir/04_FIA/05_FIA_DataMart/CSV/"
exists(dir)
file.exists(dir)
# create export dir
if (!file.exists(dir)) {
dir.create(dir)
}
source("~/GitHub/gtac-treemap/gtac_production_scripts/02_Reference_Data_Prep/01_download_fia_data.R")
